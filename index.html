<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Timer</title>
<style>
  :root{
    --bg1:#0f172a;     
    --bg2:#020617;    
    --glass:rgba(255,255,255,.08);
    --glass-strong:rgba(255,255,255,.12);
    --text:#e5e7eb;   
    --muted:#94a3b8; 
    --accent:#7c3aed;  
    --accent-2:#22d3ee;
    --danger:#ef4444;
    --ok:#10b981;      
    --ring:#1f2937;
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    color:var(--text);
    background:
      radial-gradient(1200px 1200px at 10% 10%, rgba(124,58,237,.25), transparent 60%),
      radial-gradient(1000px 1000px at 90% 20%, rgba(34,211,238,.25), transparent 60%),
      linear-gradient(180deg, var(--bg1), var(--bg2));
    display:grid;
    place-items:center;
    padding:24px;
  }

  .card{
    width:min(960px, 96vw);
    border-radius:24px;
    background:linear-gradient(180deg, var(--glass-strong), var(--glass));
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border:1px solid rgba(255,255,255,.12);
    box-shadow: 0 10px 30px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.06);
    padding:24px;
  }

  header{
    display:flex; align-items:center; justify-content:space-between; gap:12px;
    margin-bottom:16px;
  }
  .title{
    font-size:clamp(20px, 2.2vw, 28px);
    font-weight:700;
    letter-spacing:.3px;
    display:flex; align-items:center; gap:10px;
  }
  .title .dot{
    width:10px; height:10px; border-radius:999px; background:var(--muted);
    box-shadow:0 0 0 4px rgba(148,163,184,.15);
  }
  .status.running .dot{ background:var(--ok) }
  .status.paused .dot{ background:#f59e0b }
  .status.idle .dot{ background:var(--muted) }
  .status.done .dot{ background:var(--danger) }

  .grid{
    display:grid; gap:24px;
    grid-template-columns: 1.1fr .9fr;
  }
  @media (max-width: 820px){
    .grid{ grid-template-columns: 1fr; }
  }

  .ring-wrap{
    position:relative; aspect-ratio:1/1; width:min(520px, 80vw); margin:auto;
  }
  .ring{
    position:absolute; inset:0;
    border-radius:50%;
    background:
      conic-gradient(var(--accent) var(--deg, 0deg), rgba(255,255,255,.08) 0deg);
    display:grid; place-items:center;
    transition: background 0.2s linear;
  }
  .ring::before{
    content:""; position:absolute; inset:16px; border-radius:50%;
    background:
      radial-gradient(800px 800px at 30% 20%, rgba(124,58,237,.20), transparent 60%),
      radial-gradient(600px 600px at 70% 80%, rgba(34,211,238,.16), transparent 60%),
      linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.02));
    border:1px solid rgba(255,255,255,.10);
    box-shadow: inset 0 0 60px rgba(0,0,0,.35);
  }

  .time{
    position:relative;
    z-index:1;
    text-align:center;
  }
  .time .big{
    font-variant-numeric: tabular-nums;
    font-size: clamp(36px, 7vw, 68px);
    font-weight:800;
    letter-spacing:.5px;
    text-shadow: 0 1px 0 rgba(255,255,255,.04);
  }
  .time .hint{
    margin-top:6px;
    font-size:14px; color:var(--muted);
  }
  .panel{
    display:grid; gap:16px;
    grid-template-rows: auto auto 1fr;
  }
  .inputs{
    display:flex; gap:12px; flex-wrap:wrap;
  }
  .field{
    flex:1 0 140px;
    background:rgba(15,23,42,.55);
    border:1px solid rgba(255,255,255,.1);
    border-radius:14px; padding:10px 12px;
  }
  .field label{
    display:block; font-size:12px; color:var(--muted); margin-bottom:6px;
    letter-spacing:.2px;
  }
  .field input{
    width:100%; font-size:20px; font-weight:700;
    color:var(--text);
    background:transparent; border:0; outline:none;
    font-variant-numeric: tabular-nums;
  }
  .field input::-webkit-outer-spin-button,
  .field input::-webkit-inner-spin-button{ -webkit-appearance: none; margin:0; }
  .field input[type=number]{ appearance: textfield; }

  .buttons{
    display:flex; gap:12px; flex-wrap:wrap;
  }
  button{
    appearance:none; border:0; cursor:pointer;
    padding:12px 16px; border-radius:14px;
    font-weight:700; letter-spacing:.2px;
    background:linear-gradient(180deg, rgba(255,255,255,.15), rgba(255,255,255,.06));
    border:1px solid rgba(255,255,255,.14);
    color:var(--text);
    transition: transform .05s ease, opacity .2s ease, filter .2s ease;
    will-change: transform;
  }
  button:hover{ filter:brightness(1.05) }
  button:active{ transform: translateY(1px) }
  .primary{
    background:
      linear-gradient(180deg, rgba(124,58,237,.28), rgba(124,58,237,.18)),
      linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.06));
    border-color: rgba(124,58,237,.45);
  }
  .danger{
    background:
      linear-gradient(180deg, rgba(239,68,68,.28), rgba(239,68,68,.18)),
      linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.06));
    border-color: rgba(239,68,68,.45);
  }
  .ghost{
    background: transparent;
    border-color: rgba(255,255,255,.14);
  }
  .sr-only{
    position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0;
  }
</style>
</head>
<body>
  <div class="card">
    <header class="status idle" id="statusBar" aria-live="polite">
      <div class="title"><span class="dot" aria-hidden="true"></span> <span>Elegant Timer</span></div>
    </header>

    <div class="grid">
     
      <section class="ring-wrap" aria-label="Timer progress">
        <div class="ring" id="ring" style="--deg:0deg">
          <div class="time">
            <div class="big" id="time">00:00:00</div>
            <div class="hint" id="subhint">Set hours & minutes, then Start</div>
          </div>
        </div>
      </section>

  
      <section class="panel" aria-label="Timer controls">
        <div class="inputs">
          <div class="field">
            <label for="hours">Hours</label>
            <input id="hours" type="number" min="0" max="99" step="1" placeholder="0" inputmode="numeric" />
          </div>
          <div class="field">
            <label for="mins">Minutes</label>
            <input id="mins" type="number" min="0" max="59" step="1" placeholder="0" inputmode="numeric" />
          </div>
          <div class="field">
            <label for="quick">Quick Presets</label>
            <select id="quick" style="width:100%; background:transparent; color:var(--text); font-weight:600; border:0; outline:none; font-size:16px;">
              <option value="">Select…</option>
              <option value="0,5">5 min</option>
              <option value="0,10">10 min</option>
              <option value="0,25">25 min</option>
              <option value="1,0">1 hour</option>
              <option value="2,0">2 hours</option>
            </select>
          </div>
        </div>

        <div class="buttons" role="group" aria-label="Timer actions">
          <button class="primary" id="startBtn">Start</button>
          <button class="ghost" id="pauseBtn" disabled>Pause</button>
          <button class="ghost" id="resumeBtn" disabled>Resume</button>
          <button class="danger" id="resetBtn" disabled>Reset</button>
        </div>
      </section>
    </div>
  </div>

<script>
(function(){
  const hoursEl = document.getElementById('hours');
  const minsEl = document.getElementById('mins');
  const quickEl = document.getElementById('quick');
  const timeEl = document.getElementById('time');
  const subhintEl = document.getElementById('subhint');
  const ringEl = document.getElementById('ring');
  const statusBar = document.getElementById('statusBar');

  const startBtn = document.getElementById('startBtn');
  const pauseBtn = document.getElementById('pauseBtn');
  const resumeBtn = document.getElementById('resumeBtn');
  const resetBtn = document.getElementById('resetBtn');

  let totalMs = 0;
  let endAt = 0;
  let remainingMs = 0;
  let rafId = null;
  let running = false;
  let paused = false;

  function clamp(val, min, max){ return Math.max(min, Math.min(max, val)); }

  function format(ms){
    ms = Math.max(0, ms|0);
    const s = Math.floor(ms/1000);
    const hh = Math.floor(s/3600).toString().padStart(2,'0');
    const mm = Math.floor((s%3600)/60).toString().padStart(2,'0');
    const ss = Math.floor(s%60).toString().padStart(2,'0');
    return `${hh}:${mm}:${ss}`;
  }

  function setStatus(kind){
    statusBar.classList.remove('idle','running','paused','done');
    statusBar.classList.add(kind);
  }

  function updateRing(){
    const pct = totalMs > 0 ? 1 - (remainingMs / totalMs) : 0;
    const deg = (pct * 360).toFixed(2);
    ringEl.style.setProperty('--deg', deg + 'deg');
  }

  function draw(){
    if (!running){ cancelAnimationFrame(rafId); return; }
    const now = performance.now();
    remainingMs = Math.max(0, endAt - now);
    timeEl.textContent = format(remainingMs);
    document.title = (remainingMs>0 ? "⏲ " + format(remainingMs) : "⏲ Time's up!");
    updateRing();

    if (remainingMs <= 0){
      finish();
      return;
    }
    rafId = requestAnimationFrame(draw);
  }

  function finish(){
    running = false; paused = false;
    remainingMs = 0;
    setStatus('done');
    subhintEl.textContent = "Time's up!";
    startBtn.disabled = false;
    pauseBtn.disabled = true;
    resumeBtn.disabled = true;
    resetBtn.disabled = false;
    timeEl.textContent = "00:00:00";
    ringEl.style.setProperty('--deg', '360deg');

    try { if (navigator.vibrate) navigator.vibrate([200,100,200]); } catch(e){}
    beep(); 
  }

  function beep(){
    try{
      const ctx = new (window.AudioContext || window.webkitAudioContext)();
      const o = ctx.createOscillator();
      const g = ctx.createGain();
      o.connect(g); g.connect(ctx.destination);
      o.type='triangle';
      const now = ctx.currentTime;
      o.frequency.setValueAtTime(880, now);
      g.gain.setValueAtTime(0.0001, now);
      g.gain.exponentialRampToValueAtTime(0.2, now + 0.02);
      o.start(now);
    
      o.frequency.setValueAtTime(880, now + 0.00);
      o.frequency.setValueAtTime(660, now + 0.20);
      o.frequency.setValueAtTime(990, now + 0.40);
      g.gain.exponentialRampToValueAtTime(0.0001, now + 0.8);
      o.stop(now + 0.85);
    }catch(e){}
  }

  function readInputsToMs(){
    const h = clamp(parseInt(hoursEl.value || 0, 10), 0, 99);
    const m = clamp(parseInt(minsEl.value || 0, 10), 0, 59);
    hoursEl.value = h;
    minsEl.value = m;
    return ((h*60 + m) * 60) * 1000;
  }

  function start(){
    totalMs = readInputsToMs();
    if (!totalMs){
      subhintEl.textContent = "Set at least 1 minute (or 1 hour).";
      return;
    }
    running = true; paused = false;
    remainingMs = totalMs;
    endAt = performance.now() + remainingMs;
    setStatus('running');
    subhintEl.textContent = "Counting down…";
    startBtn.disabled = true;
    pauseBtn.disabled = false;
    resumeBtn.disabled = true;
    resetBtn.disabled = false;
    rafId = requestAnimationFrame(draw);
  }

  function pause(){
    if (!running || paused) return;
    paused = true; running = false;
    cancelAnimationFrame(rafId);
    setStatus('paused');
    subhintEl.textContent = "Paused";
    pauseBtn.disabled = true;
    resumeBtn.disabled = false;
 
  }

  function resume(){
    if (running || !paused) return;
    running = true; paused = false;
    endAt = performance.now() + remainingMs;
    setStatus('running');
    subhintEl.textContent = "Resumed";
    pauseBtn.disabled = false;
    resumeBtn.disabled = true;
    rafId = requestAnimationFrame(draw);
  }

  function reset(){
    running = false; paused = false;
    cancelAnimationFrame(rafId);
    setStatus('idle');
    subhintEl.textContent = "Set hours & minutes, then Start";
    timeEl.textContent = "00:00:00";
    ringEl.style.setProperty('--deg', '0deg');
    document.title = "Timer";
    startBtn.disabled = false;
    pauseBtn.disabled = true;
    resumeBtn.disabled = true;
    resetBtn.disabled = true;
    remainingMs = 0; totalMs = 0;
  }

  quickEl.addEventListener('change', () => {
    const val = quickEl.value;
    if (!val) return;
    const [h,m] = val.split(',').map(Number);
    hoursEl.value = h; minsEl.value = m;
    subhintEl.textContent = "Preset applied. Press Start.";
  });

  startBtn.addEventListener('click', start);
  pauseBtn.addEventListener('click', pause);
  resumeBtn.addEventListener('click', resume);
  resetBtn.addEventListener('click', reset);


  window.addEventListener('keydown', (e)=>{
    const k = e.key.toLowerCase();
    if (k === 's') start();
    else if (k === 'p') { if (running) pause(); else if (paused) resume(); }
    else if (k === 'r') reset();
  });

  document.addEventListener('visibilitychange', ()=>{
    if (document.hidden || !running) return;
    remainingMs = Math.max(0, endAt - performance.now());
    updateRing();
  });

  [hoursEl, minsEl].forEach(el=>{
    el.addEventListener('keydown', e=>{
      if (e.key === 'Enter') start();
    });
  });
})();
</script>
</body>
</html>
